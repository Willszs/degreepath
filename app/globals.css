@import "tailwindcss";

:root {
  --background: #f6efe5;
  --foreground: #2f2a24;
  --paper: #fff9f1;
  --line: #e5d6bf;
  --muted: #6b6054;
  --accent: #b7643c;
  --accent-soft: #f4dfd0;
  --parallax-offset: 0px;
  --scroll-progress: 0;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans:
    "Noto Sans SC", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Segoe UI", Roboto, Helvetica, Arial,
    sans-serif;
  --font-mono: "SFMono-Regular", Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #f6efe5;
    --foreground: #2f2a24;
    --paper: #fff9f1;
    --line: #e5d6bf;
    --muted: #6b6054;
    --accent: #b7643c;
    --accent-soft: #f4dfd0;
  }
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family:
    "Noto Sans SC", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Segoe UI", Roboto, Helvetica, Arial,
    sans-serif;
  background-image:
    radial-gradient(circle at 12% 10%, #f9e7d2 0, transparent 32%),
    radial-gradient(circle at 88% 18%, #efd7c3 0, transparent 28%),
    linear-gradient(180deg, #f8f2e8 0%, #f6efe5 55%, #f3eadf 100%);
  background-position: center calc(var(--scroll-progress) * 30px);
}

html {
  scroll-behavior: smooth;
}

section[id] {
  scroll-margin-top: 7.5rem;
}

.paper {
  border: 1px solid var(--line);
  background: var(--paper);
  box-shadow: 0 8px 30px rgb(88 63 39 / 8%);
}

.fold-card summary::-webkit-details-marker,
.fold-item summary::-webkit-details-marker {
  display: none;
}

.fold-card .fold-arrow,
.fold-item .fold-arrow {
  transition: transform 180ms ease;
}

.fold-card[open] .fold-arrow,
.fold-item[open] .fold-arrow {
  transform: rotate(180deg);
}

.fold-markdown h1,
.fold-markdown h2,
.fold-markdown h3 {
  margin: 0.9rem 0 0.45rem;
  color: var(--foreground);
  font-weight: 800;
  line-height: 1.3;
}

.fold-markdown h1 {
  font-size: 1.45rem;
}

.fold-markdown h2 {
  font-size: 1.3rem;
}

.fold-markdown h3 {
  font-size: 1.15rem;
}

.fold-markdown p {
  margin: 0.6rem 0;
  color: var(--foreground);
}

.fold-markdown strong {
  font-weight: 800;
}

.fold-markdown ul,
.fold-markdown ol {
  margin: 0.45rem 0 0.75rem;
  padding-left: 1.2rem;
}

.fold-markdown li {
  margin: 0.25rem 0;
}

.fold-markdown hr {
  margin: 1rem 0;
  border-color: var(--line);
}

[data-motion="on"] [data-tilt] {
  position: relative;
  transform-style: preserve-3d;
  transform: perspective(900px) rotateX(var(--tilt-x, 0deg)) rotateY(var(--tilt-y, 0deg));
  transition: transform 180ms ease, box-shadow 220ms ease, background-color 220ms ease;
}

[data-motion="on"] [data-tilt]::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: radial-gradient(
    circle at var(--spot-x, 50%) var(--spot-y, 50%),
    rgb(255 255 255 / 34%) 0,
    transparent 45%
  );
  opacity: 0;
  transition: opacity 220ms ease;
  pointer-events: none;
}

[data-motion="on"] [data-tilt]:hover::after {
  opacity: 1;
}

.floating-blob {
  position: absolute;
  border-radius: 9999px;
  filter: blur(2px);
  opacity: 0.36;
  transform: translateY(calc(var(--parallax-offset) * -1));
}

.scroll-tint {
  position: absolute;
  inset: -10%;
  background:
    conic-gradient(
      from calc(var(--scroll-progress) * 1turn) at 50% 50%,
      rgb(219 142 97 / 30%),
      rgb(237 202 160 / 14%),
      rgb(173 120 82 / 32%),
      rgb(236 192 150 / 14%),
      rgb(219 142 97 / 30%)
    );
  mix-blend-mode: multiply;
  opacity: calc(0.12 + var(--scroll-progress) * 0.32);
  filter: saturate(calc(1 + var(--scroll-progress) * 1.8)) blur(24px);
  transform: translateY(calc(var(--parallax-offset) * -0.42));
}

.blob-a {
  top: 8%;
  left: -8%;
  height: 18rem;
  width: 18rem;
  background: radial-gradient(circle at 30% 35%, #f7dcbf 0, #f3c8a6 55%, transparent 100%);
  animation: float-drift-1 14s ease-in-out infinite;
}

.blob-b {
  top: 38%;
  right: -7%;
  height: 16rem;
  width: 16rem;
  background: radial-gradient(circle at 35% 35%, #eec9b4 0, #d9b4a1 58%, transparent 100%);
  animation: float-drift-2 16s ease-in-out infinite;
}

.blob-c {
  bottom: -2%;
  left: 28%;
  height: 13rem;
  width: 13rem;
  background: radial-gradient(circle at 40% 40%, #f0d7bf 0, #e7c5a8 60%, transparent 100%);
  animation: float-drift-3 12s ease-in-out infinite;
}

.orbit-ring {
  position: absolute;
  border-radius: 9999px;
  border: 1px dashed rgb(183 100 60 / 22%);
  transform: translateY(calc(var(--parallax-offset) * -0.45));
  animation: orbit-spin 20s linear infinite;
}

.orbit-ring .orbit-dot {
  position: absolute;
  border-radius: 9999px;
}

.orbit-dot-main {
  top: -7px;
  left: 50%;
  height: 12px;
  width: 12px;
  background: rgb(183 100 60 / 82%);
  transform: translateX(-50%);
  box-shadow:
    0 0 18px rgb(183 100 60 / 45%),
    0 0 36px rgb(183 100 60 / 22%);
  animation: orbit-dot-flicker 1.9s ease-in-out infinite;
}

.orbit-dot-main::after {
  content: "";
  position: absolute;
  right: 10px;
  top: 2px;
  width: 22px;
  height: 6px;
  border-radius: 9999px;
  background: linear-gradient(90deg, rgb(183 100 60 / 45%), transparent);
  transform: rotate(11deg);
}

.orbit-dot-secondary {
  right: -6px;
  top: 56%;
  height: 9px;
  width: 9px;
  background: rgb(234 180 141 / 78%);
  box-shadow: 0 0 14px rgb(234 180 141 / 40%);
  animation: orbit-dot-flicker 2.2s ease-in-out infinite;
  animation-delay: 260ms;
}

.orbit-dot-mini {
  left: 22%;
  bottom: -5px;
  height: 7px;
  width: 7px;
  background: rgb(246 216 188 / 78%);
  box-shadow: 0 0 10px rgb(246 216 188 / 40%);
  animation: orbit-dot-flicker 2.45s ease-in-out infinite;
  animation-delay: 540ms;
}

.orbit-1 {
  right: -5rem;
  top: 10rem;
  height: 24rem;
  width: 24rem;
}

.orbit-2 {
  left: -6rem;
  bottom: 8rem;
  height: 18rem;
  width: 18rem;
  animation-direction: reverse;
  animation-duration: 24s;
}

.pulse-core {
  position: absolute;
  right: 20%;
  top: 22%;
  height: 10px;
  width: 10px;
  border-radius: 9999px;
  background: rgb(183 100 60 / 70%);
  box-shadow: 0 0 0 0 rgb(183 100 60 / 35%);
  animation: soft-pulse 2.4s ease-out infinite;
}

.hero-cycle {
  display: inline-flex;
  align-items: center;
  gap: 0.35rem;
}

.nav-orbit-link {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 9999px;
  padding: 0.15rem 0.35rem;
  transition: color 180ms ease;
}

[data-nav-link][data-active="true"]::before {
  content: "";
  position: absolute;
  inset: -5px -8px;
  border-radius: 9999px;
  border: 1px solid rgb(183 100 60 / 28%);
  opacity: 0.9;
  animation: nav-ring-spin 2.4s linear infinite;
}

[data-nav-link][data-active="true"]::after {
  content: "";
  position: absolute;
  inset: -6px -10px;
  border-radius: 9999px;
  background: radial-gradient(circle at 50% 50%, rgb(183 100 60 / 16%) 0, transparent 65%);
  opacity: 0.8;
  animation: nav-ring-breathe 1.6s ease-in-out infinite;
  z-index: -1;
}

.cycle-window {
  position: relative;
  display: inline-block;
  height: 1.1rem;
  width: 6.5rem;
  overflow: hidden;
  vertical-align: middle;
}

.cycle-track {
  display: flex;
  flex-direction: column;
  animation: cycle-words 10s steps(4) infinite;
}

.cycle-track > span {
  height: 1.1rem;
  line-height: 1.1rem;
  font-weight: 600;
  color: var(--accent);
}

@keyframes float-drift-1 {
  0%,
  100% {
    transform: translateY(calc(var(--parallax-offset) * -1)) translateX(0);
  }
  50% {
    transform: translateY(calc(var(--parallax-offset) * -1 + 12px)) translateX(16px);
  }
}

@keyframes float-drift-2 {
  0%,
  100% {
    transform: translateY(calc(var(--parallax-offset) * -1)) translateX(0);
  }
  50% {
    transform: translateY(calc(var(--parallax-offset) * -1 - 14px)) translateX(-18px);
  }
}

@keyframes float-drift-3 {
  0%,
  100% {
    transform: translateY(calc(var(--parallax-offset) * -1)) translateX(0);
  }
  50% {
    transform: translateY(calc(var(--parallax-offset) * -1 + 10px)) translateX(12px);
  }
}

@keyframes orbit-spin {
  from {
    transform: translateY(calc(var(--parallax-offset) * -0.45)) rotate(0deg);
  }
  to {
    transform: translateY(calc(var(--parallax-offset) * -0.45)) rotate(360deg);
  }
}

@keyframes soft-pulse {
  0% {
    box-shadow: 0 0 0 0 rgb(183 100 60 / 35%);
    transform: scale(1);
  }
  70% {
    box-shadow: 0 0 0 20px rgb(183 100 60 / 0%);
    transform: scale(1.05);
  }
  100% {
    box-shadow: 0 0 0 0 rgb(183 100 60 / 0%);
    transform: scale(1);
  }
}

@keyframes cycle-words {
  0% {
    transform: translateY(0);
  }
  100% {
    transform: translateY(-4.4rem);
  }
}

@keyframes nav-ring-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@keyframes nav-ring-breathe {
  0%,
  100% {
    opacity: 0.5;
    transform: scale(0.98);
  }
  50% {
    opacity: 0.95;
    transform: scale(1.02);
  }
}

@keyframes orbit-dot-flicker {
  0%,
  100% {
    opacity: 0.7;
    filter: brightness(0.95);
  }
  50% {
    opacity: 1;
    filter: brightness(1.2);
  }
}

.muted {
  color: var(--muted);
}

.accent {
  color: var(--accent);
}

.cozy-prose h1,
.cozy-prose h2,
.cozy-prose h3 {
  color: var(--foreground);
}

.cozy-prose p,
.cozy-prose li,
.cozy-prose blockquote {
  color: var(--foreground);
}

.cozy-prose .prose {
  font-size: 1.05rem;
  line-height: 1.9;
}

.cozy-prose .prose h1 {
  margin-top: 1.8rem;
  margin-bottom: 1rem;
  font-size: 2rem;
  line-height: 1.2;
  font-weight: 800;
}

.cozy-prose .prose h2 {
  margin-top: 1.6rem;
  margin-bottom: 0.8rem;
  font-size: 1.55rem;
  line-height: 1.28;
  font-weight: 750;
}

.cozy-prose .prose h3 {
  margin-top: 1.3rem;
  margin-bottom: 0.65rem;
  font-size: 1.25rem;
  line-height: 1.35;
  font-weight: 700;
}

.cozy-prose .prose p {
  margin: 0.9rem 0;
}

.cozy-prose .prose strong {
  color: var(--foreground);
  font-weight: 800;
}

.cozy-prose .prose ul,
.cozy-prose .prose ol {
  margin: 0.8rem 0 1rem;
  padding-left: 1.3rem;
}

.cozy-prose .prose li {
  margin: 0.35rem 0;
}

.cozy-prose .prose hr {
  margin: 1.6rem 0;
  border-color: var(--line);
}

.cozy-prose .prose blockquote {
  margin: 1rem 0;
  border-left: 3px solid var(--accent);
  padding-left: 0.9rem;
  color: var(--muted);
}

[data-motion="on"] [data-reveal] {
  opacity: 0;
  transform: translateY(20px);
  transition:
    opacity 600ms ease,
    transform 600ms ease;
}

[data-motion="on"] [data-reveal].is-visible {
  opacity: 1;
  transform: translateY(0);
}

[data-motion="on"] [data-reveal-item] {
  opacity: 0;
  transform: translateY(14px);
  transition:
    opacity 500ms ease,
    transform 500ms ease;
}

[data-motion="on"] [data-reveal].is-visible [data-reveal-item] {
  opacity: 1;
  transform: translateY(0);
}

@media (prefers-reduced-motion: reduce) {
  html {
    scroll-behavior: auto;
  }

  [data-motion="on"] [data-reveal],
  [data-motion="on"] [data-reveal-item] {
    opacity: 1;
    transform: none;
    transition: none;
  }

  .floating-blob {
    animation: none;
    transform: none;
  }

  .scroll-tint {
    transform: none;
    filter: none;
    opacity: 0.12;
  }

  [data-motion="on"] [data-tilt] {
    transform: none;
    transition: none;
  }

  .orbit-ring,
  .orbit-dot-main,
  .orbit-dot-secondary,
  .orbit-dot-mini,
  .pulse-core,
  .cycle-track,
  [data-nav-link][data-active="true"]::before,
  [data-nav-link][data-active="true"]::after {
    animation: none;
    transform: none;
  }
}
